### axios

axios 把每个拦截器构造为 promise.then 的参数，运行时执行这个 promise 链。

### redux

redux 的插件就是利用高阶函数不断包装 dispatch。

### koa

koa 的插件机制的洋葱模型实现得比较巧妙, 以 next() 函数为分割点，先由外到内执行 Request 的逻辑，再由内到外执行 Response 的逻辑。也就是说外层的中间件可以影响内层的请求和响应阶段，内层的中间件只能影响外层的响应阶段。
koa 的洋葱模型主要是中间件执行顺序的一种模型。其主要优势是，可以在前一个中间件中，await 后面的中间件的执行结果。所以，这种模型的使用，也是基于其优点，比如，计算耗时、前一个中间件需要后面中间件的结果这种场景。

### 参考文章

https://juejin.cn/post/6844904039608500237#heading-4

https://juejin.cn/post/7012031464237694983
