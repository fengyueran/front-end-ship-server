---
title: 尾递归
date: 2020-5-06 18:10:20
---

先给面试官简单说下什么是递归函数：函数内部循环调用自身的就是递归函数，若函数没有执行完毕，执行栈中会一直保持函数相关的变量，一直占用内存，当递归次数过大的时候，就可能会出现内存溢出，也叫爆栈，页面可能会卡死。
所以为了避免出现这种情况，可以采用尾递归。
尾递归：在函数的最后一步是调用函数，进入下一个函数不在需要上一个函数的环境了，内存空间 O(n) 到 O(1) 的优化 ，这就是尾递归。
尾递归的好处：可以释放外层函数的调用栈，较少栈层级，节省内存开销，避免内存溢出。
网上很多用斐波那契数列作为栗子，但我偏不，我用个数组累加的栗子

```js
function add1(arr) {
  if (arr.length === 0) {
    return 0;
  }
  return add1(arr.slice(1)) + arr[0]; // 还有父级函数中 arr[0] 的引用
}

function add(arr, re) {
  if (arr.length === 0) {
    return re + 0;
  } else {
    return add(arr.slice(1), arr[0] + re); // 仅仅是函数调用
  }
}

console.log(add([1, 2, 3, 4], 0)); // 10
console.log(add1([1, 2, 3, 4])); // 10
```
