---
title: 希尔排序算法排序
tags: [JS]
type: SHORT_ANSWER
date: 2018-1-15 18:10:20
---

### 希尔排序算法

希尔排序，也称递减增量排序算法，是插入排序的一种更高效的改进版本。但希尔排序是非稳定排序算法。

希尔排序是基于插入排序的以下两点性质而提出改进方法的：

- 插入排序在对几乎已经排好序的数据操作时，效率高，即可以达到线性排序的效率；
- 但插入排序一般来说是低效的，因为插入排序每次只能将数据移动一位；

希尔排序的基本思想是：先将整个待排序的记录序列分割成为若干子序列分别进行直接插入排序，待整个序列中的记录"基本有序"时，再对全体记录进行依次直接插入排序。

- 算法步骤

  1. 先取一个小于数组长度 n 的整数 d1 作为第一个增量，根据这个增量将整个序列分组，所有距离为 d1 倍数的元素为一组

  如果以步长为 3 开始进行排序，可以通过将序列放在有 3 列的表中来更好地描述算法，这样他们就应该看起来是这样：

  ```
  9   3   13
  35  25  1
  10  27  51
  4
  ```

  2. 在各组进行插入排序

  即对每列进行排序：

  ```
  4   3   1
  9   25  13
  10  27  51
  35
  ```

  3. 取第二个增量 d2\< d1 重复上述的分组和排序
  4. 直到增量为 1，即所有元素放在同一组中进行直接插入排序为止。

  一般初次取序列的一半为增量，以后每次减半，直到增量为 1。

  ```js
  // 对于数组[9, 3, 13, 35, 25, 1, 10, 27, 51, 4]，增量取5、2、1
  const shellSort = (arr) => {
    const len = arr.length;
    for (let gap = Math.floor(len / 2); gap > 0; gap = Math.floor(gap / 2)) {
      for (let i = gap; i < len; i++) {
        let preIndex = i - gap;
        const current = arr[i];
        while (preIndex >= 0 && current < arr[preIndex]) {
          arr[preIndex + gap] = arr[preIndex];
          preIndex -= gap;
        }
        arr[preIndex + gap] = curren;
      }
    }
    return arr;
  };
  ```

  排序过程大致如下：
  ![希尔排序示意图](http://blog-bed.oss-cn-beiiing.aliyuncs.com/%E9%A2%98%E5%BA%93/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F.png)

  希尔排序为**非稳定算法**，其最坏的时间复杂度为 O(n^2)，经过优化的希尔排序最坏情形运行时间为 O(n^1.3)。
