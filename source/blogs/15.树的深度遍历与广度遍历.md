---
layout: post
title: æ ‘çš„æ·±åº¦éå†ä¸å¹¿åº¦éå†
category: js
tagline: "Supporting tagline"
tags: [js]
description: ä½œä¸ºä¸€ä¸ªéç§‘ç­å‡ºç”Ÿçš„å‰ç«¯å¼€å‘äººå‘˜ï¼Œå¹³æ—¶å¯¹æ•°æ®ç»“æ„ä¸ç®—æ³•äº†è§£å¾—ç›¸å¯¹è¾ƒå°‘ï¼Œå½“è°ˆåˆ°æ·±åº¦éå†ä¸å¹¿åº¦éå†æ—¶å°±ä¸€è„¸æ‡µé€¼ï¼Œäºæ˜¯æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œå¸Œæœ›å¯¹å…¶æœ‰ä¸€ä¸ªåŸºæœ¬è®¤è¯†ï¼Œå¹¶èƒ½å¤Ÿå®ç°æ·±åº¦ã€å¹¿åº¦éå†çš„æ–¹æ³•ã€‚
date: 2017-6-26 26:11:08
---

### **åŸºæœ¬æ¦‚å¿µ**

æ ‘æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºæ ‘æ˜¯å› ä¸ºå…¶ç»“æ„ç±»ä¼¼äºå€’ç½®çš„ ğŸŒ²ï¼Œå®ƒçš„æ ¹åœ¨ä¸Šï¼Œæå¶åœ¨ä¸‹ã€‚æ ‘ä¸­ä¸€ä¸ªæœ€åŸºæœ¬çš„æ•°æ®ç§°ä¸ºèŠ‚ç‚¹(Node)ï¼Œå¯¹åº”äº ğŸŒ² ä¸­çš„æ¯ä¸€ä¸ªåˆ†å‰ã€‚æ ‘å…·æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹(root)ï¼Œæ ¹èŠ‚ç‚¹ä¹‹ä¸‹å¯èƒ½å…·æœ‰å¤šä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹é—´é€šè¿‡è¾¹(edge)ç›¸è¿ï¼Œè¡¨ç¤ºå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚è¿™ç§ç»“æ„ç±»ä¼¼äº Html æ–‡æ¡£ï¼Œå…¬å¸çš„ç»„ç»‡ç»“æ„...

<img src="http://blog-bed.oss-cn-beijing.aliyuncs.com/15.%E6%A0%91%E7%9A%84%E6%B7%B1%E5%BA%A6%E9%81%8D%E5%8E%86%E4%B8%8E%E5%B9%BF%E5%BA%A6%E9%81%8D%E5%8E%86/%E6%A0%91%E7%9A%84%E7%BB%93%E6%9E%84%E7%A4%BA%E6%84%8F%E5%9B%BE.png">
<center>å›¾1. æ ‘çš„ç»“æ„ç¤ºæ„å›¾ </center>

### **æ ‘ç›¸å…³çš„æœ¯è¯­**

- æ ¹ç»“ç‚¹: æ ‘æœ€é¡¶å±‚ç»“ç‚¹ï¼Œä¹Ÿæ˜¯æ ‘ä¸­å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œå¦‚å›¾ 1 ä¸­çš„èŠ‚ç‚¹ 1ã€‚
- è¾¹: ä¸¤ä¸ªç»“ç‚¹ä¹‹é—´çš„è¿æ¥ã€‚
- çˆ¶ç»“ç‚¹: ä¸€ä¸ªèŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹åˆ™ç§°è¿™ä¸ªèŠ‚ç‚¹æ˜¯å…¶å­ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚
- å…„å¼Ÿç»“ç‚¹: å…·æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹äº’ä¸ºå…„å¼ŸèŠ‚ç‚¹ï¼Œå¦‚å›¾ä¸­çš„ 7ã€8ã€9ã€‚
- å¶å­ç»“ç‚¹: æ ‘ä¸­æ²¡æœ‰å­ç»“ç‚¹çš„ç»“ç‚¹(æ ‘å¾—æœ«ç«¯)ï¼Œå¦‚å›¾ 1 ä¸­çš„ 6ã€7ã€8ã€9ã€10ã€‚
- å±‚æ¬¡: èŠ‚ç‚¹çš„å±‚æ¬¡ä»æ ¹å¼€å§‹å®šä¹‰ï¼Œæ ¹ä¸ºç¬¬ä¸€å±‚ï¼Œæ ¹çš„å­èŠ‚ç‚¹ä¸ºç¬¬äºŒå±‚ï¼Œä¾æ¬¡ç±»æ¨
- æ·±åº¦: æ ‘ä¸­ç»“ç‚¹çš„æœ€å¤§å±‚æ¬¡ç§°ä¸ºæ ‘çš„æ·±åº¦

### **æ“ä½œæ ‘**

åœ¨è®¡ç®—æœºç§‘å­¦ä¸­æ ‘æ˜¯ä¸€ç§ç”¨æ¥æ¨¡æ‹Ÿåˆ†å±‚æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œæ ‘ç”±å¤šä¸ªèŠ‚ç‚¹æ„æˆï¼Œè€Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è‡ªèº«çš„æ•°æ®(data)åŠæŒ‡å‘å…¶ä»–èŠ‚ç‚¹(parentã€children)çš„æŒ‡é’ˆï¼Œå¦‚ä¸‹å®šä¹‰äº†èŠ‚ç‚¹å’Œæ ‘ã€‚

#### èŠ‚ç‚¹

- data: èŠ‚ç‚¹çš„æ•°æ®
- parent: èŠ‚ç‚¹çš„çˆ¶äº²
- children: èŠ‚ç‚¹çš„å­èŠ‚ç‚¹

```
class Node {
  constructor(data) {
    this.data = data;
    this.parent = null;
    this.children = [];
  }
}
```

#### æ ‘

æ ‘æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ root

```
class Tree {
  constructor(data) {
    this._root = new Node(data);
  }
}
```

æ„é€ å›¾ 1 ä¸­çš„æ ‘

```
  const tree = new Tree({ id: 1, value: 1 });
  const node2 = new Node({ id: 2, value: 2 });
  node2.parent = tree._root;
  tree._root.children.push(node2);

  const node3 = new Node({ id: 3, value: 3 });
  node3.parent = tree._root;
  tree._root.children.push(node3);

  const node4 = new Node({ id: 4, value: 4 })
  node4.parent = node2;
  node2.children.push(node4);

  const node5 = new Node({ id: 5, value: 5 })
  node5.parent = node3;
  node3.children.push(node5);

  const node6 = new Node({ id: 6, value: 6 })
  node6.parent = node3;
  node3.children.push(node6);

  const node7 = new Node({ id: 7, value: 7 })
  node7.parent = node4;
  node4.children.push(node7);
  const node8 = new Node({ id: 8, value: 8 })
  node8.parent = node4;
  node4.children.push(node8);
  const node9 = new Node({ id: 9, value: 9 })
  node9.parent = node4;
  node4.children.push(node9);

  const node10 = new Node({ id: 10, value: 10 })
  node10.parent = node5;
  node5.children.push(node10);
```

#### Tree çš„æ–¹æ³•

æ¥ä¸‹æ¥æˆ‘ä»¬å°†è¦åˆ›å»ºä»¥ä¸‹äº”ç§æ–¹æ³•ã€‚

- traverseDF(callback)

- traverseBF(callback)

- contains(callback, traversalType)

- add(data, toId, traversalType)

- remove(node, parent)

**æ–¹æ³• 1/5: traverseDF(callback)**

è¿™ç§æ–¹æ³•ä»¥æ·±åº¦ä¼˜å…ˆéå†æ ‘ï¼Œå³å°½å¯èƒ½æ·±çš„éå†æ ‘çš„åˆ†æ”¯ï¼Œå†è¿›è¡Œå›æº¯ã€‚åœ¨è¿™é‡Œé€šè¿‡é€’å½’å’Œéé€’å½’çš„æ–¹å¼æ¥å®ç°ã€‚

- é€’å½’æ–¹æ³•

  æ ‘æœ¬æ¥å°±æ˜¯ä¸€ä¸ªé€’å½’ç»“æ„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“æƒ³åˆ°ç”¨é€’å½’çš„æ–¹å¼æ¥éå†æ ‘ã€‚å¯¹äºå›¾ 1 ä¸­çš„æ ‘æ¥è¯´é€šè¿‡å¦‚ä¸‹é€’å½’æ–¹æ³•æ·±åº¦ä¼˜å…ˆéå†çš„ç»“æœæ˜¯: 7ã€8ã€9ã€4ã€2ã€10ã€5ã€6ã€3ã€1ã€‚å½“ç„¶ï¼Œæ·±åº¦ä¼˜å…ˆå¹¶ä¸ä¸€å®šæ˜¯è¿™ä¸ªé¡ºåºï¼Œæ·±åº¦ä¼˜å…ˆï¼Œé‡åœ¨æ·±åº¦ï¼Œåœ¨è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹è¿˜æœ‰å­èŠ‚ç‚¹ï¼Œä¼šä¼˜å…ˆå‘æ›´æ·±çš„å­èŠ‚ç‚¹è¿›è¡Œæœç´¢ï¼Œè€Œä¸æ˜¯æœç´¢åŒå±‚çš„å…„å¼ŸèŠ‚ç‚¹ã€‚

  ```
    traverseDF(callback) {
      const recuseNode = (node) => {
        for (let i = 0; i < node.children.length; i++) {
          recuseNode(node.children[i]);
        }
        callback(node);
      };
      recuseNode(this._root);
    }

    tree.traverseDF((node) => {
      console.log(node.data.id); // 7 8 9 4 2 10 5 6 3 1
    });
  ```

- éé€’å½’æ–¹æ³•

  éé€’å½’æ–¹æ³•ä¸»è¦æ˜¯åˆ©ç”¨æ ˆçš„ç‰¹æ€§æ¥å®ç°ã€‚å¯¹äºå›¾ 1 ä¸­çš„æ ‘æ¥è¯´é€šè¿‡å¦‚ä¸‹æ–¹æ³•æ·±åº¦ä¼˜å…ˆéå†çš„ç»“æœæ˜¯: 1ã€2ã€4ã€7ã€8ã€9ã€3ã€5ã€10ã€6ã€‚

  ```
    traverseDFWithOutRecuse(callback) {
      let currentTree = this._root;
      let stack = [currentTree];
      while (stack.length) {
        currentTree = stack.pop();
        callback(currentTree);
        for (let i = currentTree.children.length - 1; i >= 0; i--) {
          stack.push(currentTree.children[i]);
        }
      }
    }

    tree.traverseDFWithOutRecuse((node) => {
      console.log(node.data.id); // 1 2 4 7 8 9 3 5 10 6
    });
  ```

**æ–¹æ³• 2/5: traverseBF(callback)**

è¿™ç§æ–¹æ³•ä»¥å¹¿åº¦ä¼˜å…ˆéå†æ ‘: ä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œå¯¹æ¯ä¸€å±‚èŠ‚ç‚¹ä¾æ¬¡è®¿é—®ï¼Œè®¿é—®ä¸€å±‚è¿›å…¥ä¸‹ä¸€å±‚ï¼Œè€Œä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½è®¿é—®ä¸€æ¬¡ã€‚å¯¹äºå›¾ 1 ä¸­çš„æ ‘æ¥è¯´é€šè¿‡å¹¿åº¦ä¼˜å…ˆéå†çš„ç»“æœæ˜¯: 1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ã€9ã€10ã€‚

```
  class Queue {
    constructor() {
        this.dataStore = [];
    }

    add(element) {
        this.dataStore.push(element);
    }

    pop() {
        return this.dataStore.shift();
    }
  }

  traverseBF(callback) {
    let currentTree = this._root;
    const queue = new Queue();
    while (currentTree) {
      for (let i = 0; i < currentTree.children.length; i++) {
        queue.add(currentTree.children[i]);
      }
      callback(currentTree);
      currentTree = queue.pop();
    }
  }
```

**æ–¹æ³• 3/5: contains(callback, traversalType)**

contains æ–¹æ³•ç”¨äºåœ¨æ ‘ä¸­æœç´¢ç‰¹å®šçš„å€¼ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºå›è°ƒå‡½æ•°ï¼Œæ¯éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹å°±ä¼šä»¥è¯¥èŠ‚ç‚¹ä¸ºå›è°ƒå‚æ•°å›è°ƒï¼Œç¬¬äºŒä¸ªä¸ºéå†çš„ç±»å‹(æ·±åº¦éå†æˆ–å¹¿åº¦éå†)

```
 contains(callback, traversalType) {
    const traverse = this[traversalType];
    traverse.call(this, callback);
  }

```

æœç´¢ç‰¹å®š id çš„èŠ‚ç‚¹å°±å¯ä»¥è¿™æ ·å†™ï¼š

```
tree.contains((node) => {
  if (node.id === '5') {
    console.log(node);
  }
}, 'traverseDF');
```

**æ–¹æ³• 4/5: add(data, toId, traversalType)**

è¯¥æ–¹æ³•ç”¨äºåœ¨æŒ‡å®šèŠ‚ç‚¹æ·»åŠ èŠ‚ç‚¹ã€‚

```
  add(data, toId, traversalType) {
    let parent = null;
    //éå†æ˜¯å¦æœ‰ç›®æ ‡èŠ‚ç‚¹
    this.contains((node) => {
      if (node.data === toId) {
        parent = node.parent;
      }
    }, traversalType);
    //æœ‰ç›®æ ‡èŠ‚ç‚¹åˆ™æ·»åŠ èŠ‚ç‚¹
    if (parent) {
      const newNode = new Node(data);
      newNode.parent = parent;
      parent.children.push(newNode);
    } else {
      throw new Error(`can't find the target node`);
    }
  }
```

**æ–¹æ³• 5/5: remove(fromId, traversalType)**

è¯¥æ–¹æ³•ç”¨äºåœ¨æŒ‡å®šèŠ‚ç‚¹ä¸‹çš„èŠ‚ç‚¹ã€‚

```
  remove(fromId, traversalType) {
    let parent = null;
    let deleteNode = null;
    //éå†æ˜¯å¦æœ‰ç›®æ ‡èŠ‚ç‚¹
    this.contains((node) => {
      if (node.id === fromId) {
        parent = node.parent;
        deleteNode = node;
      }
    }, traversalType);

    //æœ‰ç›®æ ‡èŠ‚ç‚¹åˆ™éå†ç›®æ ‡èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ˜¯å¦æœ‰è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œæœ‰åˆ™åˆ é™¤
    if (parent) {
      const findIndex = parent.children.findIndex(node => deleteNode.id === node.id);
      if (findIndex >= 0) {
        parent.children.splice(findIndex, 1);
      }
    } else {
      throw new Error(`can't find the target node`);
    }
  }
```

#### æ ‘çš„å®Œæ•´å®ç°

```
class Queue {
  constructor() {
    this.dataStore = [];
  }

  add(element) {
    this.dataStore.push(element);
  }

  pop() {
    return this.dataStore.shift();
  }
}


class Node {
  constructor(data) {
    this.data = data;
    this.parent = null;
    this.children = [];
  }
}

class Tree {
  constructor(data) {
    this._root = new Node(data);
  }

  traverseDF(callback) {
    const recuseNode = (node) => {
      for (let i = 0; i < node.children.length; i++) {
        recuseNode(node.children[i]);
      }
      callback(node);
    };
    recuseNode(this._root);
  }

  traverseDFWithOutRecuse(callback) {
    let currentTree = this._root;
    let stack = [currentTree];
    while (stack.length) {
      currentTree = stack.pop();
      callback(currentTree);
      for (let i = currentTree.children.length - 1; i >= 0; i--) {
        stack.push(currentTree.children[i]);
      }
    }
  }

  traverseBF(callback) {
    let currentTree = this._root;
    const queue = new Queue();
    while (currentTree) {
      for (let i = 0; i < currentTree.children.length; i++) {
        queue.add(currentTree.children[i]);
      }
      callback(currentTree);
      currentTree = queue.pop();
    }
  }

  contains(callback, traversalType) {
    const traverse = this[traversalType];
    traverse.call(this, callback);
  }

  add(data, toId, traversalType) {
    let parent = null;
    this.contains((node) => {
      if (node.data === toId) {
        parent = node.parent;
      }
    }, traversalType);
    if (parent) {
      const newNode = new Node(data);
      newNode.parent = parent;
      parent.children.push(newNode);
    } else {
      throw new Error(`can't find the target node`);
    }
  }

  remove(fromId, traversalType) {
    let parent = null;
    let deleteNode = null;
    this.contains((node) => {
      if (node.id === fromId) {
        parent = node.parent;
        deleteNode = node;
      }
    }, traversalType);

    if (parent) {
      const findIndex = parent.children.findIndex(node => deleteNode.data === node.data);
      if (findIndex >= 0) {
        parent.children.splice(findIndex, 1);
      }
    } else {
      throw new Error(`can't find the target node`);
    }
  }
}
```
