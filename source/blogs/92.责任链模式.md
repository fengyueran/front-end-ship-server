# 责任链模式

在讨论责任链模式之前，先来看这样一个例子：

某公司的请假政策：

- 请假 1-2 天

  如果员工使用年假，则由主管审批，否则由部门经理审批。

- 请假 3-5 天

  如果员工使用年假，则由部门经理审批，否则由总监审批。

- 请假 6-9 天

  如果员工使用年假，则由总监审批，否则由总裁审批。

```ts
const vacate = (dayCount: number, isAnnualVacation: boolean) => {
  if (dayCount <= 2) {
    if (isAnnualVacation) {
      console.log("由主管审批");
    } else {
      console.log("由部门经理审批");
    }
  } else if (dayCount <= 5) {
    if (isAnnualVacation) {
      console.log("由部门经理审批");
    } else {
      console.log("由总监审批");
    }
  } else if (dayCount <= 9) {
    if (isAnnualVacation) {
      console.log("由总监审批");
    } else {
      console.log("由总裁审批");
    }
  }
};
```

显然，这个代码并不那么友好，当要修改审批规则时，不得不深入代码修改，不符合开闭原则。我们将代码进行优化：

```ts

const vacate1To2Days = (isAnnualVacation:boolean)=> {
    if (isAnnualVacation) {
      console.log("由主管审批");
    } else {
      console.log("由部门经理审批");
    }
}

const vacate3To5Days = (isAnnualVacation:boolean)=> {
     if (isAnnualVacation) {
      console.log("由部门经理审批");
    } else {
      console.log("由总监审批");
    }
}


const vacate6To9Days = (isAnnualVacation:boolean)=> {
    if (isAnnualVacation) {
      console.log("由总监审批");
    } else {
      console.log("由总裁审批");
    }
}


const vacate = (dayCount: number, isAnnualVacation: boolean) => {
  if (dayCount <= 2) {
   vacate1To2Days(isAnnualVacation);
  } else if (dayCount <= 5) {
   vacate3To5Days(isAnnualVacation);
  }  else if (dayCount <= 9) {
   vacate6To9Days(isAnnualVacation);
  }
```
