<p>以下数据结构中，id 代表部门编号，name 是部门名称，parentId 是父部门编号，为 0 代表一级部门，现在要求实现一个 convert 方法，把原始 list 转换成树形结构，parentId 为多少就挂载在该 id 的属性 children 数组下，结构如下：</p>
<pre><code class="language-js">const list = [
  { id: 1, name: &quot;部门A&quot;, parentId: 0 },
  { id: 2, name: &quot;部门B&quot;, parentId: 0 },
  { id: 3, name: &quot;部门C&quot;, parentId: 1 },
  { id: 4, name: &quot;部门D&quot;, parentId: 1 },
  { id: 5, name: &quot;部门E&quot;, parentId: 2 },
  { id: 6, name: &quot;部门F&quot;, parentId: 3 },
  { id: 7, name: &quot;部门G&quot;, parentId: 2 },
  { id: 8, name: &quot;部门H&quot;, parentId: 4 },
];

const convert = (arr) =&gt; {
  const res = [];
  const map = arr.reduce((pre, curr) =&gt; {
    pre[curr.id] = curr;
    return pre;
  }, {});
  for (const v of arr) {
    const p = map[v.parentId];
    if (p) {
      if (!p.childern) p.childern = [];
      p.childern.push(v);
    } else {
      res.push(v);
    }
  }
  return res;
};

console.log(&quot;map&quot;, JSON.stringify(convert(list)));</code></pre>
